import{_ as n,c as a,a0 as l,o as p}from"./chunks/framework.BDOpb1iH.js";const b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"web/浏览器相关/路由切换.md","filePath":"web/浏览器相关/路由切换.md","lastUpdated":1733362906000}'),o={name:"web/浏览器相关/路由切换.md"};function e(t,s,r,c,B,y){return p(),a("div",null,s[0]||(s[0]=[l(`<h2 id="路由切换" tabindex="-1">路由切换 <a class="header-anchor" href="#路由切换" aria-label="Permalink to &quot;路由切换&quot;">​</a></h2><hr><p><a href="https://juejin.cn/post/7127143415879303204" target="_blank" rel="noreferrer">文章转载</a></p><hr><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8dbd5db8c31b4d27a0123bf1a50a9b20~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?" alt="前端路由"></p><hr><ul><li>理解<br> 如何理解<strong>路由</strong>的概念，其实还是要从「<strong>单页面</strong>」着手，进行剖析。</li></ul><p><strong>单页面</strong>也就是指我们的服务只有<strong>一个 index.html</strong>静态文件</p><h3 id="hash-模式" tabindex="-1">hash 模式 <a class="header-anchor" href="#hash-模式" aria-label="Permalink to &quot;hash 模式&quot;">​</a></h3><p>首页：yourdomain.xxx.com/index.html/#/<br> 商城：yourdomain.xxx.com/index.html/#/shop<br> 购物车：yourdomain.xxx.com/index.html/#/shopping-cart<br> 我的：yourdomain.xxx.com/index.html/#/mine</p><p># 号后面的就是一个 URL 中关于 hash 的组成部分, 可以看到不同路由对应的 hash 是不一样的, 但是他们都是访问同一个静态资源 index.html, 我们要做的，就是如何能够监听到 URL 中关于 hash 部分发生的变化，从而做出对应的改变。</p><hr><p>其实浏览器已经暴露给我们一个现成的方法<strong>hashchange</strong>，在 hash 改变的时候，触发该事件。有了监听事件，且改变 hash 页面并不刷新，这样我们就可以在监听事件的回调函数中，执行我们展示和隐藏不同 UI 显示的功能，从而实现前端路由</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">&lt;!</span><span style="color:#E5C07B;">DOCTYPE</span><span style="color:#E06C75;"> html</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#D19A66;font-style:italic;"> lang</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;en&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;font-style:italic;"> charset</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;font-style:italic;"> http-equiv</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;X-UA-Compatible&quot;</span><span style="color:#D19A66;font-style:italic;"> content</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;IE=edge&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;font-style:italic;"> name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#D19A66;font-style:italic;"> content</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;实现简单的hash路由&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    * </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">      margin</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      padding</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    html, body </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">      height</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#56B6C2;">%</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    #content </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">      height</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">calc</span><span style="color:#ABB2BF;">(100</span><span style="color:#E06C75;">vh</span><span style="color:#56B6C2;"> -</span><span style="color:#ABB2BF;"> 50</span><span style="color:#E06C75;">px</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">      display</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">flex</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      align</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">items</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">center</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      justify</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">center</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      font</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">size</span><span style="color:#ABB2BF;">: 3</span><span style="color:#E06C75;">em</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #nav </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">      height</span><span style="color:#ABB2BF;">: 50</span><span style="color:#E06C75;">px</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      position</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">fixed</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      left</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      bottom</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#56B6C2;">%</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      display</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">flex</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      align</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">items</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">center</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    #nav a </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">      width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">25</span><span style="color:#56B6C2;">%</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      height</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#56B6C2;">%</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      display</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">flex</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      align</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">items</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">center</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      justify</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">center</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">      border</span><span style="color:#ABB2BF;">: 1</span><span style="color:#E06C75;">px</span><span style="color:#E06C75;"> solid</span><span style="color:#ABB2BF;"> #</span><span style="color:#D19A66;">333</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    #nav a:not(:last-of-type) </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">      border</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">right</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">none</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">main</span><span style="color:#D19A66;font-style:italic;"> id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;content&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">main</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">nav</span><span style="color:#D19A66;font-style:italic;"> id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;nav&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#D19A66;font-style:italic;"> href</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;#/&quot;</span><span style="color:#D19A66;font-style:italic;"> id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;home&quot;</span><span style="color:#ABB2BF;">&gt;首页&lt;/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#D19A66;font-style:italic;"> href</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;#/about&quot;</span><span style="color:#D19A66;font-style:italic;"> id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;about&quot;</span><span style="color:#ABB2BF;">&gt;关于我&lt;/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#D19A66;font-style:italic;"> href</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;#/contact&quot;</span><span style="color:#D19A66;font-style:italic;"> id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;contact&quot;</span><span style="color:#ABB2BF;">&gt;联系我&lt;/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">a</span><span style="color:#D19A66;font-style:italic;"> href</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;#/mine&quot;</span><span style="color:#D19A66;font-style:italic;"> id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;mine&quot;</span><span style="color:#ABB2BF;">&gt;我的&lt;/</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">nav</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    class VueRouter </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#61AFEF;">      constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">routes</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> []) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        this.</span><span style="color:#E06C75;">routes</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> routes</span></span>
<span class="line"><span style="color:#ABB2BF;">        this.</span><span style="color:#E06C75;">currentHash</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">        this.</span><span style="color:#E06C75;">refresh</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">refresh</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        window.addEventListener(</span><span style="color:#98C379;">&#39;hashchange&#39;</span><span style="color:#ABB2BF;">, this.</span><span style="color:#E06C75;">refresh</span><span style="color:#ABB2BF;">, false)</span></span>
<span class="line"><span style="color:#ABB2BF;">        window.addEventListener(</span><span style="color:#98C379;">&#39;load&#39;</span><span style="color:#ABB2BF;">, this.</span><span style="color:#E06C75;">refresh</span><span style="color:#ABB2BF;">, false)</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">      getUrlPath</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        return url.indexOf(</span><span style="color:#98C379;">&#39;#&#39;</span><span style="color:#E06C75;">) &gt;= 0 ? url.slice(url.indexOf(</span><span style="color:#98C379;">&#39;#&#39;</span><span style="color:#E06C75;">) + 1) </span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">      matchComponent</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        let </span><span style="color:#E06C75;">curRoute</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">routes</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">find</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">route</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#E5C07B;"> route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">path</span><span style="color:#56B6C2;"> ===</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentHash</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">        if</span><span style="color:#ABB2BF;"> (!</span><span style="color:#E06C75;font-style:italic;">curRoute</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E06C75;">          curRoute</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">routes</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">find</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">route</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#E5C07B;"> route</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">path</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;/&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        const { </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;"> } = </span><span style="color:#E06C75;">curRoute</span></span>
<span class="line"><span style="color:#ABB2BF;">        document.querySelector(</span><span style="color:#98C379;">\`#content\`</span><span style="color:#E06C75;">).innerHTML = component</span></span>
<span class="line"><span style="color:#E06C75;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">      refresh(event) {</span></span>
<span class="line"><span style="color:#E06C75;">        console.log(event);</span></span>
<span class="line"><span style="color:#E06C75;">        let newHash = </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">oldHash</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> null</span></span>
<span class="line"><span style="color:#61AFEF;">        if</span><span style="color:#ABB2BF;"> (event.newURL) {</span></span>
<span class="line"><span style="color:#E06C75;">          newHash</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getUrlPath</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">newURL</span><span style="color:#56B6C2;"> ||</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">          oldHash</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getUrlPath</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">oldURL</span><span style="color:#56B6C2;"> ||</span><span style="color:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        } else {</span></span>
<span class="line"><span style="color:#E06C75;">          newHash</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getUrlPath</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">location</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">hash</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        this.</span><span style="color:#E06C75;">currentHash</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> newHash</span></span>
<span class="line"><span style="color:#ABB2BF;">        this.matchComponent()</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    const router = new VueRouter([</span></span>
<span class="line"><span style="color:#C678DD;">      {</span></span>
<span class="line"><span style="color:#E06C75;">        path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;home&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        component</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;首页内容&lt;/div&gt;&#39;</span></span>
<span class="line"><span style="color:#C678DD;">      }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">      {</span></span>
<span class="line"><span style="color:#E06C75;">        path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/about&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;about&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        component</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;关于我&lt;/div&gt;&#39;</span></span>
<span class="line"><span style="color:#C678DD;">      }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">      {</span></span>
<span class="line"><span style="color:#E06C75;">        path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/contact&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;contact&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        component</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;联系我&lt;/div&gt;&#39;</span></span>
<span class="line"><span style="color:#C678DD;">      }</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">      {</span></span>
<span class="line"><span style="color:#E06C75;">        path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/mine&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;mine&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        component</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;&lt;div&gt;我的&lt;/div&gt;&#39;</span></span>
<span class="line"><span style="color:#C678DD;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    ])</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br></div></div><h3 id="history-模式" tabindex="-1">history 模式 <a class="header-anchor" href="#history-模式" aria-label="Permalink to &quot;history 模式&quot;">​</a></h3><p>history 路由模式的实现, 是要归功于 HTML5 提供的一个 history 全局对象, 可以将它理解为其中包含了关于我们访问网页（历史会话）的一些信息。同时它还暴露了一些有用的方法，比如：</p><ul><li>window.history.go 可以跳转到浏览器会话历史中的指定的某一个记录页</li><li>window.history.forward 指向浏览器会话历史中的下一页，跟浏览器的前进按钮相同</li><li>window.history.back 返回浏览器会话历史中的上一页，跟浏览器的回退按钮功能相同</li><li>window.history.pushState 可以将给定的数据压入到浏览器会话历史栈中</li><li>window.history.replaceState 将当前的会话页面的 url 替换成指定的数据</li></ul><p>history 路由的实现, 主要是依赖于 pushState 与 replaceState 实现的, 这里我们先总结下它们的一些特点</p><ul><li>都会改变当前页面显示的 url, 但都不会刷新页面</li><li>pushState 是压入浏览器的会话历史栈中, 会使得 history.length➕1, 而 replaceState 是替换当前的这条会话历史, 因此不会增加 history.length</li></ul><p>既然已经能够通过 pushState 或 replaceState 实现改变 URL 而不刷新页面，那么是不是如果我们能够监听到改变 URL 这个动作，就可以实现前端渲染逻辑的处理呢？这个时候，我们还要了解一个事件处理程序 popstate，先看下它的官方定义</p><div class="language-markdown line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">每当激活同一文档中不同的历史记录条目时，popstate 事件就会在对应的 window 对象上触发。如果当前处于激活状态的历史记录条目是由 history.pushState() 方法创建的或者是由 history.replaceState() 方法修改的，则 popstate 事件的 state 属性包含了这个历史记录条目的 state 对象的一个拷贝。</span></span>
<span class="line"><span style="color:#ABB2BF;">调用 history.pushState() 或者 history.replaceState() 不会触发 popstate 事件。popstate 事件只会在浏览器某些行为下触发，比如点击后退按钮（或者在 JavaScript 中调用 history.back() 方法）。即，在同一文档的两个历史记录条目之间导航会触发该事件。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,21)]))}const C=n(o,[["render",e]]);export{b as __pageData,C as default};
