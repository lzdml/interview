## 数组操作方法

::: details 根据一个数组 id 对另外一个数组进行排序并返回

```js
const initialArr = [
  { id: 2, name: "Alexa" },
  { id: 1, name: "John" },
  { id: 5, name: "Mary" },
  { id: 9, name: "Zuzu" },
  { id: 3, name: "Mary" },
  { id: 4, name: "Peter" },
];
const arr = [1, 2, 3, 4];

initialArr.sort((a, b) => {
  const getTypeIndex = (x) => arr.indexOf(x.id);

  return getTypeIndex(a) - getTypeIndex(b) && a.id - b.id;
});

console.log(initialArr);

// [
//   {id: 1, name: 'John'},
//   {id: 2, name: 'Alexa'},
//   {id: 3, name: 'Mary'},
//   {id: 4, name: 'Peter'},
//   {id: 5, name: 'Mary'},
//   {id: 9, name: 'Zuzu'}
// ]
```

:::

---

::: details 数组扁平化

```js
let arr2 = [0, [1], [2, 3], [4, [5, 6, 7]]]; // 数组扁平化
let dimensionReduction = function (arr) {
  return arr.reduce((acc, cur) => {
    return acc.concat(Array.isArray(cur) ? dimensionReduction(cur) : cur);
  }, []);
};

console.log(dimensionReduction(arr2));
```

:::

---

::: details url 参数拼接

```js
/**
 * Add the object as a parameter to the URL
 * @param baseUrl url
 * @param obj
 * @returns {string}
 * eg:
 *  let obj = {a: '3', b: '4'}
 *  setObjToUrlParams('www.baidu.com', obj)
 *  ==>www.baidu.com?a=3&b=4
 */
export function setObjToUrlParams(baseUrl: string, obj: any): string {
  let parameters = "";
  for (const key in obj) {
    parameters += key + "=" + encodeURIComponent(obj[key]) + "&";
  }
  parameters = parameters.replace(/&$/, "");
  return /\?$/.test(baseUrl)
    ? baseUrl + parameters
    : baseUrl.replace(/\/?$/, "?") + parameters;
}
```

:::

---

::: details 深度合并对象

```js
function is(val, type) {
  return toString.call(val) === `[object ${type}]`;
}
function isObject(val) {
  return val !== null && is(val, "Object");
}

/**
 * @param src {object}
 * @param target {object}
 * @return {object}
 */

function deepMerge(src, target) {
  let key;
  for (key in target) {
    src[key] = isObject(src[key])
      ? deepMerge(src[key], target[key])
      : (src[key] = target[key]);
  }
  return src;
}
```

:::



----------------------
<end-time time="新增时间: 2022-11-17 09-05" mood="周四" />

::: details 数组中对象根据id或者其他字段去重
```js
let a = [
  { id: 6, name: '66' },
  { id: 1, name: '11' },
  { id: 2, name: '22' },
  { id: 3, name: '33' },
  { id: 4, name: '44' },
  { id: 5, name: '55' },
  { id: 3, name: '33' },
  { id: 1, name: '11' },
  { id: 4, name: '44' }
]
console.log('a :>> ', a.length); // a :>>  9

let c = b = a;

function unique(arr) {
  const res = new Map()
  return arr.filter(a => !res.has(a.id) && res.set(a.id, 1))
}

b = unique(b)

console.log('b.length :>> ', b.length); // 6

function handleFilter(arr) {
  let obj = {}
  return arr.reduce(function (item, next) {
    obj[next.id] ? '' : obj[next.id] = true && item.push(next)
    return item;
  }, [])
}

console.log('handleFilter :>> ', handleFilter(c).length); // 6
```
:::